<div class="container">
  <div class="d-flex mt-4">
    <div class="card-trip w-100">
      <%= @item.photo.attached? ? cl_image_tag(@item.photo.key) : "" %>
      <div class="card-trip-infos">
        <div>
          <h2><%= @item.name.capitalize %></h2>
          <p> <%= @item.description %></p>
        </div>
      </div>
    </div>
    <% if user_signed_in? %>
      <div class="form px-5 d-flex justify-content-center w-100">
        <%= simple_form_for [@item, @offering] do |f| %>
          <%= f.association :offered, label: 'Choose an item to offer', collection: current_user.items.map {|item| [item.name, item.id]}%>
          <%= f.submit class: 'btn btn-flat', value: 'Make an Offer', data: { disable_with: false }%>
        <% end %>
      </div>
    <% else %>
      <div><%= link_to "Sign in to offer",  new_user_session_path %></div>
    <% end %>
  </div>
</div>
<%# Why I cant get the photo? NO PHOTO YET MAYBE%>
<%# How can I display the item that has been offered from another user %>
<%# if there is %>
<%# if item-offering include item-id then display  all of them%>
<div class = "offered-header">
  <h4>Offers to this product </h4>
</div>
<div class="offers">
  <% if @item.offered_offerings.any? %>
    <% @item.offered_offerings.each do |offering| %>
      <div class="offerings">
        <div class='offering-image'><%= cl_image_tag offering.offered.photo.key, height: 100, width: 200, crop: :fill  %></div>
        <div class='offering-content'>
          <%# <% offering = Offering.find_by(item: @item, movie: movie) %>
          <h4><%= offering.offered.name.capitalize %></h4>
          <p><%= offering.offered.description %></p>
        </div>
      </div>
    <% end %>
  <% else %>
    <div class="no-offer-message">
      <h5>No offer yet!</h5>
    </div>
  <% end %>
</div>
